{% extends 'base.html.twig' %}

{% block title %}Liste des jeux - {{ parent() }}{% endblock %}

{% block body %}
<div class="card">
    <div class="card-body">
        <a class="btn btn-success" href="{{ path('app_game_new') }}">Ajouter un jeu</a>
    </div>

    {# table.table>thead>tr>th*3 #}
    <table class="table">
        <thead>
            <tr>
                <th>Nom</th>
                <th>Date</th>
                <th>Cat√©gorie</th>
                <th>Supports</th>
                {% if is_granted('ROLE_USER') %}<th>Actions</th>{% endif %}
            </tr>
        </thead>
        <tbody>
            {% for entity in entities %}
            <tr>
                <td>
                    <a href="{{ path('app_game_show', {'id': entity.id}) }}">
                        {{ entity.name }}
                    </a>
                </td>
                <td>
                {% if entity.releaseDate is not empty %}
                {{ entity.releaseDate|date('d/m/Y') }}
                {% else %}
                -
                {% endif %}
                </td>
                <td>{{ entity.category }}</td>
                <td>
                    {% for support in entity.supports %}
                        <span class="badge bg-info mx-1">{{ support }}</span>
                    {% endfor %}
                </td>
                {% if is_granted('ROLE_USER') %}
                <td>
                    <a href="{{ path('app_game_edit', {'id': entity.id}) }}" class="btn btn-light">Modifier</a>
                    <a href="{{ path('app_game_delete', {'id': entity.id}) }}" class="btn btn-danger me-1">Supprimer</a>
                </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}